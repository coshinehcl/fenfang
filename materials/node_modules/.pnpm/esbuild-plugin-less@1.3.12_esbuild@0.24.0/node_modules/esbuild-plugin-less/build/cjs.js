var w=Object.create;var l=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var E=(e,t)=>{for(var s in t)l(e,s,{get:t[s],enumerable:!0})},v=(e,t,s,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of I(t))!C.call(e,r)&&r!==s&&l(e,r,{get:()=>t[r],enumerable:!(o=D(t,r))||o.enumerable});return e};var m=(e,t,s)=>(s=e!=null?w($(e)):{},v(t||!e||!e.__esModule?l(s,"default",{value:e,enumerable:!0}):s,e)),M=e=>v(l({},"__esModule",{value:!0}),e);var W={};E(W,{lessLoader:()=>U});module.exports=M(W);var R=require("fs"),x=m(require("path")),S=m(require("less"));var p=m(require("fs")),c=m(require("path")),k=/@import.*?["']([^"']+)["'].*?/,F=/@import.*?["']([^"']+)["'].*?/g,O=/(?:\/\*(?:[\s\S]*?)\*\/)|(\/\/(?:.*)$)/gm,P=[".css",".less"];function d(e,t=[],s=new Set){try{if(s.has(e))return[];s.add(e);let o=c.default.dirname(e),f=(p.default.readFileSync(e).toString("utf8").replace(O,"").match(F)||[]).map(n=>n.match(k)[1]).filter(n=>!!n).map(n=>{let a=c.default.resolve(o,c.default.extname(n)?n:`${n}.less`);if(!p.default.existsSync(a))for(let h=0;h<t.length;h++){let L=c.default.resolve(t[h],c.default.extname(n)?n:`${n}.less`);if(p.default.existsSync(L)){a=L;break}}return a});return f.reduce((n,a)=>[...n,...d(a,t,s)],f).filter(n=>P.includes(c.default.extname(n).toLowerCase()))}catch{return[]}}function y(e){let t=e.extract.filter(o=>o),s=t.length===3?t[1]:t[0];return{text:e.message,location:{namespace:"file",file:e.filename,line:e.line,column:e.column,lineText:s}}}function U(e={},t={}){return{name:"less-loader",setup:s=>{let o=t.filter;s.onResolve({filter:o||/\.less$/,namespace:"file"},async r=>{let i=(await s.resolve(r.path,{kind:r.kind,importer:r.importer,resolveDir:r.resolveDir,pluginData:r.pluginData})).path;return{path:i,watchFiles:[i,...d(i,e.paths||[])]}}),s.onLoad({filter:o||/\.less$/,namespace:"file"},async r=>{let u=await R.promises.readFile(r.path,"utf-8"),i=x.default.dirname(r.path),g=x.default.basename(r.path).endsWith(".module.less")?"local-css":"css",n={filename:r.path,relativeUrls:!0,...e,paths:[...e.paths||[],i]};try{return{contents:(await S.default.render(u,n)).css,loader:g,resolveDir:i}}catch(a){return{errors:[y(a)],resolveDir:i}}})}}}0&&(module.exports={lessLoader});
